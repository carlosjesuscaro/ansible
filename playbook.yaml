---

- name: Test Playbook to Install ZSH
  hosts: all
  become: true  # This tells Ansible to use sudo
  vars_files:
    - common_pkgs.yaml
  tasks:
    - name: Installing common packages
      ansible.builtin.package:
        name: "{{ common_packages }}"
        state: present

    - name: Verify zsh installation
      ansible.builtin.command: zsh --version
      register: zsh_version
      changed_when: false

    - name: Show zsh version in logs
      ansible.builtin.debug:
        msg: "ZSH is installed and the version is {{ zsh_version.stdout }}"